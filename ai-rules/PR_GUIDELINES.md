# Pull Request ガイドライン

このドキュメントでは、PR作成時の基本ルールとテンプレートを提供します。

**PRレビューからマージまでの詳細プロセス**: [PR_MERGE_PROCESS.md](./PR_MERGE_PROCESS.md) を参照してください。

---

## PR作成時の必須項目

### タイトル
- 簡潔に変更内容を記述
- [コミットメッセージ](./COMMIT_GUIDELINES.md) のsubjectと同じ形式
- 例: `feat: ユーザーダッシュボード画面を追加`

### 本文構成

```markdown
## 概要
この変更の目的を簡潔に説明

## 変更内容
- 具体的な変更点1
- 具体的な変更点2
- 具体的な変更点3

## テスト手順
1. 手順1
2. 手順2
3. 期待される結果

## スクリーンショット
（UI変更の場合は添付）

## 関連Issue
Closes #123
Fixes #456
```

---

## PRの種類別テンプレート

### 新機能追加

```markdown
## 概要
[機能名]を追加しました。

## 変更内容
- 機能の実装内容
- 関連するファイルの変更
- データベーススキーマの変更（あれば）

## テスト手順
1. [環境/画面]にアクセス
2. [操作手順]
3. [期待される動作]

## スクリーンショット
（あれば添付）

## 関連Issue
Closes #XXX
```

---

### バグ修正

```markdown
## 概要
[バグの内容]を修正しました。

## 問題
- 発生していた問題の詳細
- 再現手順

## 原因
- 問題の根本原因

## 修正内容
- 具体的な修正内容

## テスト手順
1. 以前のバグ再現手順を実施
2. バグが解消されていることを確認

## 関連Issue
Fixes #XXX
```

---

### リファクタリング

```markdown
## 概要
[対象]をリファクタリングしました。

## 目的
- リファクタリングの理由
- 改善される点

## 変更内容
- 具体的な変更内容
- 動作に変更がないこと

## テスト手順
1. 既存機能が正常に動作することを確認
2. E2Eテストがすべてパス

## 関連Issue
なし
```

---

## PR作成後の必須アクション

⚠️ **重要**: PR作成直後に必ず実施

### 1. Codex MCP レビュー依頼

詳細は [PR_MERGE_PROCESS.md](./PR_MERGE_PROCESS.md) の「Codex MCP によるレビュー」セクションを参照してください。

### 2. レビュー対応

レビューで指摘事項があった場合は、修正して再レビュー依頼を行います。

詳細は [PR_MERGE_PROCESS.md](./PR_MERGE_PROCESS.md) の「修正対応」セクションを参照してください。

### 3. マージ

レビューが承認されたら、mainブランチへマージします。

詳細は [PR_MERGE_PROCESS.md](./PR_MERGE_PROCESS.md) の「マージ実行」セクションを参照してください。

---

## PR作成前のチェックリスト

- [ ] 専用ブランチで作業している（`feat-`, `fix-` など）
- [ ] 動作確認が完了している
- [ ] [E2Eテスト](./TESTING.md) を実施済み
- [ ] コミットメッセージが [COMMIT_GUIDELINES.md](./COMMIT_GUIDELINES.md) に準拠
- [ ] PRテンプレートに従って記載
- [ ] 関連Issueがあればリンク（`Closes #XX`）
- [ ] スクリーンショット添付（UI変更の場合）
- [ ] `.gitignore` に機密情報が含まれていないことを確認

---

## 注意事項

- **mainブランチへの直接コミットは絶対禁止**
- **PR作成直後に必ずCodex MCPレビューを依頼**
- **Critical問題が存在する場合は絶対にマージしない**
- **レビュー指摘を無視してマージしない**

---

## 関連ドキュメント

- [PR_MERGE_PROCESS.md](./PR_MERGE_PROCESS.md): PRマージプロセスの詳細
- [CODE_REVIEW.md](./CODE_REVIEW.md): コードレビューチェックリスト
- [COMMIT_GUIDELINES.md](./COMMIT_GUIDELINES.md): コミットメッセージガイドライン
- [WORKFLOW.md](./WORKFLOW.md): 開発ワークフロー全体
- [TESTING.md](./TESTING.md): テストガイドライン
- [ISSUE_GUIDELINES.md](./ISSUE_GUIDELINES.md): Issue作成ガイドライン
