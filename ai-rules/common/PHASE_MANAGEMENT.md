# フェーズ管理ガイド（汎用）

プロジェクトを大きなフェーズで区切り、段階的に開発を進めるための汎用ガイド。

## フェーズ管理の基本原則

### 1. フェーズの定義
- **フェーズ**: 機能的にまとまった開発単位（例: Phase 1: 認証基盤、Phase 2: 案件管理）
- **マイルストーン**: 各フェーズの完了条件
- **仕様確認タイミング**: フェーズ開始時と完了時

### 2. フェーズ進行フロー

```
1. フェーズ開始
   ↓
2. 仕様確認（ユーザーと合意）
   ↓
3. 実装・テスト
   ↓
4. フェーズ完了確認（仕様通りか検証）
   ↓
5. ドキュメント更新（docs/ + Serenaメモリ）
   ↓
6. 次フェーズへ
```

### 3. 各フェーズでのチェックポイント

#### フェーズ開始時
- [ ] フェーズの目的・スコープを明確化
- [ ] 実装する機能の仕様を確認
- [ ] 必要なテーブル・API設計を確認
- [ ] 依存する前フェーズの完了を確認

#### フェーズ実装中
- [ ] 通常のワークフロー（ブランチ→PR→レビュー→マージ）
- [ ] コミット前の動作確認・テスト
- [ ] レビュー指摘への対応

#### フェーズ完了時
- [ ] **仕様との整合性確認**（最重要）
- [ ] 全機能の動作確認
- [ ] E2Eテスト完了
- [ ] ドキュメント更新（docs/ + Serenaメモリ）
- [ ] ユーザーへ完了報告

## フェーズ管理ファイル

プロジェクト固有のフェーズ定義は以下に記載：
- `docs/PHASES.md` - 人間用フェーズ一覧
- `.serena/memories/phase_progress.md` - AI用詳細進捗

### PHASES.md テンプレート

```markdown
# プロジェクトフェーズ管理

## Phase 1: [フェーズ名]
**目的**: [フェーズの目的]
**期間**: [予定期間]
**ステータス**: 🔵 計画中 / 🟢 進行中 / ✅ 完了

### 実装機能
- [ ] 機能A
- [ ] 機能B

### 完了条件
- [ ] 条件1
- [ ] 条件2

---

## Phase 2: [次のフェーズ]
...
```

### phase_progress.md テンプレート（Serenaメモリ）

```markdown
# フェーズ進捗詳細

## 現在のフェーズ
**Phase X**: [フェーズ名]

## 実装済み機能
- ✅ 機能A（PR #XX）
- ✅ 機能B（PR #YY）

## 残タスク
- [ ] 機能C
- [ ] 機能D

## 技術的負債・Issue
- Issue #XX: [内容]

## 次フェーズへの引継ぎ事項
- [重要な技術的決定事項]
- [未解決の課題]
```

## フェーズ移行時の手順

### 1. 現フェーズ完了確認
```bash
# 1. Serenaメモリから進捗確認
mcp__serena__read_memory("phase_progress.md")

# 2. 仕様との整合性確認
# - docs/PHASES.md の完了条件を全てチェック
# - ユーザーと仕様の最終確認

# 3. ドキュメント更新
# - docs/PHASES.md のステータスを「✅ 完了」に更新
# - phase_progress.md に完了サマリを記載
```

### 2. 次フェーズ開始
```bash
# 1. 次フェーズの仕様確認
# - ユーザーと実装内容を合意
# - 不明点は全て解消

# 2. フェーズステータス更新
# - docs/PHASES.md を「🟢 進行中」に更新
# - phase_progress.md に開始記録

# 3. 実装開始
# - 通常のワークフロー（ブランチ→PR→レビュー→マージ）
```

## ベストプラクティス

### ✅ 推奨
- フェーズ開始時に必ず仕様を確認
- フェーズ完了時に必ず仕様通りか検証
- 各フェーズの完了条件を明確に定義
- ドキュメント更新を怠らない

### ❌ 非推奨
- 仕様未確認での実装開始
- フェーズをまたいだ実装（スコープ管理の徹底）
- ドキュメント更新の先送り

## トラブルシューティング

### Q: フェーズ途中で仕様変更があった場合は？
A: 以下の手順で対応：
1. ユーザーと変更内容を確認
2. 影響範囲を調査
3. 必要に応じてフェーズスコープを再定義
4. docs/PHASES.md を更新

### Q: フェーズ完了条件が曖昧な場合は？
A: ユーザーと以下を明確化：
- 具体的な動作条件（例: 「ログインできる」ではなく「JWT認証でログインし、ダッシュボードが表示される」）
- テストシナリオ
- 受け入れ基準
